app: Plastic_SCM
ingredients:
  dist: bionic
  packages:
    - plasticscm-client-complete
  sources:
    - deb http://us.archive.ubuntu.com/ubuntu/ bionic main universe
    - deb https://www.plasticscm.com/plasticrepo/stable/ubuntu
  script:
    - pwd
    - wget https://www.plasticscm.com/plasticrepo/stable/ubuntu/Packages.gz
    - apt-get download $(apt-cache depends --with-source Packages.gz --recurse --no-recommends --no-suggests --no-conflicts --no-breaks --no-replaces --no-enhances --no-pre-depends plasticscm-client-complete | grep "^\w")
script:
  - pwd
  - cp usr/share/applications/plasticx.desktop Plastic_SCM.desktop
  - cp opt/plasticscm5/theme/avalonia/icons/linplasticx.ico opt/plasticscm5/theme/avalonia/icons/linplasticx.ico.png
  - rm -f usr/bin/cm
  - rm -f usr/bin/gluon
  - rm -f usr/bin/gtkmergetool
  - rm -f usr/bin/plasticgui
  - ln -s ../../opt/plasticscm5/client/cm usr/bin/cm
  - ln -s ../../opt/plasticscm5/client/lingluonx usr/bin/gluon
  - ln -s ../../opt/plasticscm5/client/gtkmergetool usr/bin/gtkmergetool
  - ln -s ../../opt/plasticscm5/client/linplasticx usr/bin/plasticgui
  - ln -s ../../opt/plasticscm5/client/linplasticx usr/bin/linplasticx
  - rm AppRun
  - cp /root/AppRun .
  - chmod +x AppRun

